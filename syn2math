server=$1

if [ -z "$server" ]; then
  server=longhai@math.usask.ca;
fi

if [ ! -f syncdir.txt ]; then
  printf "A file named 'syncdir.txt' does not exist, no destination to sync.\n";
  exit 0;
fi
destination="$(cat syncdir.txt)"
printf "'$PWD' will be synchronized to\n'$server:$destination'\n" 
read -p "Type 'y' to confirm that this is right: " choice
case "$choice" in 
  y|Y ) 
  rsync -avzi$1 --delete --exclude=".*" .  $server:$destination;;
  * ) echo "Sync given up!"; exit 1;;
esac
